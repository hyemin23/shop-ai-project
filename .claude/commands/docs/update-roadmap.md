# ROADMAP.md 자동 업데이트

프로젝트의 현재 상태를 분석하여 `docs/ROADMAP.md`를 자동 업데이트한다.

## 인자

$ARGUMENTS

- 인자 없음: 전체 Phase/Task를 검사
- `phase N`: 특정 Phase만 검사 (예: `phase 2`)
- `task NNN`: 특정 Task만 검사 (예: `task 005`)

## 작업 순서

### 1단계: 현재 ROADMAP.md 읽기

`docs/ROADMAP.md` 파일을 읽고 다음을 파악한다:

- 각 Phase의 완료 상태 (헤더에 ✅ 유무)
- 각 Task의 완료 상태 (`#### ✅ Task XXX:` 형식 유무)
- 각 구현 항목의 완료 상태 (`- ✅ ` 유무)
- `See: /tasks/XXX-xxx.md` 참조 유무

### 2단계: 프로젝트 파일 존재 여부 검증

ROADMAP.md의 **"파일 생성 계획 요약"** 섹션과 각 Task의 구현 항목에 명시된 파일들이 실제로 존재하는지 Glob으로 검증한다.

**검증 대상 파일 패턴:**

- 구현 항목에서 백틱(`)으로 감싸진 파일 경로 추출
- "파일 생성 계획 요약" 섹션의 파일 목록
- `(신규/업데이트)`, `(스텁)` 등 주석은 무시하고 경로만 확인

**검증 방법:**

- 각 파일 경로에 대해 `Glob` 도구로 존재 여부 확인
- 파일이 존재하면 해당 구현 항목을 "완료"로 판정
- 파일이 존재하지 않으면 "미완료"로 판정

### 3단계: Task 완료 판정

Task가 완료되었는지 다음 기준으로 판정:

1. **산출물 파일 존재**: Task의 `**산출물**` 섹션에 명시된 모든 파일이 존재
2. **구현 항목 완료**: Task 내 모든 하위 구현 항목(`- ` 으로 시작하는 체크리스트)의 파일이 존재
3. **이미 완료된 Task는 건너뛰기**: `#### ✅ Task XXX:` 형식인 Task는 재검증하지 않음

### 4단계: ROADMAP.md 업데이트

변경이 필요한 항목만 Edit 도구로 수정:

**구현 항목 완료 표시:**

```
변경 전: - `파일경로` 생성: 설명
변경 후: - ✅ `파일경로` 생성: 설명
```

**Task 완료 표시** (모든 구현 항목이 완료된 경우):

```
변경 전: #### Task XXX: 설명
변경 후: #### ✅ Task XXX: 설명 `See: /tasks/XXX-xxx.md`
```

**Phase 완료 표시** (Phase 내 모든 Task가 완료된 경우):

```
변경 전: ### Phase N: 설명 (기간)
변경 후: ### Phase N: 설명 (기간) ✅
```

**"현재 프로젝트 상태" 섹션 업데이트:**

- 완료된 Phase 목록 갱신
- 다음 작업 단계 안내 갱신
- 최근 완성된 구성 요소 반영

### 5단계: 변경 요약 출력

업데이트 결과를 다음 형식으로 출력:

```
## ROADMAP.md 업데이트 요약

### 새로 완료된 항목
- ✅ Task XXX: 설명
  - ✅ 구현 항목 1
  - ✅ 구현 항목 2

### 변경 없음 (이미 완료)
- Task 001, 002, 003, 004

### 미완료 항목
- Task YYY: 설명
  - ❌ 미완료 파일: `파일경로`

### Phase 상태
- Phase 1: ✅ 완료
- Phase 2: 진행 중 (3/6 Task 완료)
```

## 주의사항

- **이미 ✅ 표시된 항목은 절대 중복 체크하지 않는다**
- **파일이 존재하지 않는 항목은 절대 완료 표시하지 않는다**
- **`npm run build` 성공** 같은 파일 존재와 무관한 항목은 해당 Task의 다른 모든 파일이 존재하면 함께 완료 처리한다
- Edit 도구로 정확한 문자열 매칭을 위해 충분한 컨텍스트를 포함한다
- 변경 사항이 없으면 "변경 없음"으로 보고한다
